<script>
let students = [];

fetch('students.csv')
.then(response => response.text())
.then(data => {
    let rows = data.split(/\r?\n/);
    rows.slice(1).forEach(row => {
        let cols = row.split(",");
        if(cols.length >= 6){
            students.push(cols.map(col => col.trim()));
        }
    });
});

function searchStudent() {
    let uid = document.getElementById("uid").value.trim();
    let mobile = document.getElementById("mobile").value.trim();

    let found = students.find(student =>
        student[3].trim() == uid &&
        student[2].trim() == mobile
    );

    if(found){
        document.getElementById("result").innerHTML =
            "Name: " + found[0] + "<br>" +
            "Father Name: " + found[1] + "<br>" +
            "Mobile: " + found[2] + "<br>" +
            "Unique ID: " + found[3] + "<br>" +
            "2 Wheeler: " + found[4] + "<br>" +
            "4 Wheeler: " + found[5];
    } else {
        document.getElementById("result").innerHTML = "Invalid Details!";
    }
}
</script>
